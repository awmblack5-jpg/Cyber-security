<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ÙØ­Øµ Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± â€” Ø¯Ø±Ø¹ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</title>
  <style>
    :root{
      --bg: #071024;
      --card: rgba(255,255,255,0.04);
      --glass: rgba(255,255,255,0.03);
      --accent: #ffd700;
      --accent-2: #ff9e00;
      --good: #8ef08a;
      --warn: #ffd86b;
      --bad: #ff6b6b;
      --text: #e9eef3;
      --muted: #9ab0be;
      --radius: 14px;
      --gap: 12px;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Cairo",sans-serif}
    html,body{height:100%}
    body{
      background:linear-gradient(180deg,#031023 0%,#071024 100%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .container{
      width:100%;
      max-width:760px;
      background:var(--card);
      border-radius:20px;
      padding:22px;
      box-shadow:0 10px 40px rgba(0,0,0,0.6);
      backdrop-filter: blur(6px);
    }

    h1{color:var(--accent);font-size:1.35rem;margin-bottom:8px}
    p.lead{color:var(--muted);margin-bottom:14px}

    .panel{display:flex;gap:var(--gap);flex-wrap:wrap}
    .left{flex:1;min-width:260px}
    .right{width:320px;min-width:260px}

    label{display:block;color:var(--muted);margin-bottom:8px;font-weight:600}
    input[type="password"], input[type="text"]{
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:none;
      background:var(--glass);
      color:var(--text);
      text-align:center;
      font-size:1rem;
    }

    .controls{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;justify-content:center}
    .btn{
      padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#000;
      transition:transform .12s ease,opacity .12s;
    }
    .btn.secondary{background:#111;color:var(--text)}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .btn:active{transform:translateY(1px)}
    .small{padding:8px 10px;font-size:.95rem}

    .strength{
      margin-top:16px;
    }
    .strength-bar{
      width:100%;height:14px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden;
    }
    .strength-bar .fill{height:100%;width:0%;background:var(--bad);transition:width .3s,background .3s}
    .strength-text{margin-top:8px;font-weight:800}

    .tips{margin-top:12px;color:var(--muted);text-align:right;line-height:1.6;padding-inline-start:18px}

    /* popup */
    .overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.65);align-items:center;justify-content:center;z-index:999}
    .popup{
      width:100%;max-width:560px;background:var(--card);padding:20px;border-radius:14px;
      box-shadow:0 10px 40px rgba(0,0,0,0.6);text-align:right;color:var(--text);
    }
    .popup h3{color:var(--accent);margin-bottom:8px}
    .popup .analysis{line-height:1.7;color:var(--muted);margin-bottom:14px}
    .popup .actions{display:flex;gap:10px;justify-content:flex-end}

    /* responsive */
    @media (max-width:720px){
      .panel{flex-direction:column}
      .right{width:100%}
    }
  </style>
</head>
<body>

  <div class="container" role="region" aria-label="Ø£Ø¯Ø§Ø© ÙØ­Øµ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <h1>ğŸ” ÙØ§Ø­Øµ Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h1>
    <p class="lead">Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù…Ø¹Ø±ÙØ© Ù‚ÙˆØªÙ‡Ø§ØŒ Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ‘Ù„ ÙˆØ§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„ØªØ­Ø³ÙŠÙ†Ù‡Ø§.</p>

    <div class="panel">
      <div class="left">
        <label for="pw">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
        <input id="pw" type="password" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‡Ù†Ø§" aria-label="Ø­Ù‚Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

        <div class="controls" style="margin-top:12px;">
          <button id="toggle" class="btn secondary small" title="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">ğŸ‘ï¸ Ø¥Ø¸Ù‡Ø§Ø±</button>
          <button id="gen" class="btn ghost small" title="Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙ„Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©">âš¡ Ø¥Ù†Ø´Ø§Ø¡</button>
          <button id="copy" class="btn ghost small" title="Ù†Ø³Ø® ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">ğŸ“‹ Ù†Ø³Ø®</button>
          <button id="report" class="btn small" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±">ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
          <button onclick="window.location='features.html'" class="btn small" style="margin-bottom:12px;">â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ù‚Ø³Ø§Ù…</button>
        </div>

        <div class="strength" aria-hidden="false">
          <div class="strength-bar" aria-hidden="true"><div class="fill" id="fill"></div></div>
          <div id="strengthText" class="strength-text">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</div>
          <ul id="tips" class="tips" aria-live="polite"></ul>
        </div>
      </div>

      <div class="right">
        <div style="background:var(--glass);padding:14px;border-radius:12px;">
          <h3 style="margin-bottom:8px;color:var(--accent)">Ù…Ø§Ø°Ø§ ÙŠÙ‚ÙŠØ³ Ø§Ù„ÙØ§Ø­ØµØŸ</h3>
          <ul style="color:var(--muted);line-height:1.7;text-align:right;padding-inline-start:18px">
            <li>Ø§Ù„Ø·ÙˆÙ„</li>
            <li>ØªÙ†ÙˆØ¹ Ø§Ù„Ø£Ø­Ø±Ù (ÙƒØ¨ÙŠØ±Ø©/ØµØºÙŠØ±Ø©)</li>
            <li>ÙˆØ¬ÙˆØ¯ Ø£Ø±Ù‚Ø§Ù… ÙˆØ±Ù…ÙˆØ²</li>
            <li>ØªØ¬Ù†Ù‘Ø¨ Ø§Ù„ØªØ³Ù„Ø³Ù„ ÙˆØ§Ù„ØªÙƒØ±Ø§Ø±</li>
          </ul>
          <p style="color:var(--muted);margin-top:10px;font-size:.95rem">ÙŠÙ…ÙƒÙ† Ø·Ø¨Ø§Ø¹Ø© ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶Ù‡</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± -->
  <div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="popup" role="document">
      <h3>ØªÙ‚Ø±ÙŠØ± ØªØ­Ù„ÙŠÙ„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h3>
      <div id="analysis" class="analysis"></div>
      <div class="actions">
        <button id="printBtn" class="btn ghost small">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
        <button id="closeBtn" class="btn secondary small">Ø¥ØºÙ„Ø§Ù‚</button>
      </div>
    </div>
  </div>

  <script>
    // Ø¹Ù†Ø§ØµØ±
    const pw = document.getElementById('pw');
    const toggle = document.getElementById('toggle');
    const gen = document.getElementById('gen');
    const copyBtn = document.getElementById('copy');
    const reportBtn = document.getElementById('report');
    const fill = document.getElementById('fill');
    const strengthText = document.getElementById('strengthText');
    const tipsEl = document.getElementById('tips');

    const overlay = document.getElementById('overlay');
    const analysisEl = document.getElementById('analysis');
    const closeBtn = document.getElementById('closeBtn');
    const printBtn = document.getElementById('printBtn');

    // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ„Ø¯
    function generatePassword(length = 14){
      const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+-=[]{}|;:,.<>?";
      let out = "";
      for(let i=0;i<length;i++) out += chars.charAt(Math.floor(Math.random()*chars.length));
      return out;
    }

    // ØªÙ‚ÙŠÙŠÙ… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ÙŠØ¹ÙŠØ¯ ÙƒØ§Ø¦Ù† {score, suggestions, details}
    function analyzePassword(s){
      let score = 0;
      const suggestions = [];
      const details = [];

      // Ø·ÙˆÙ„
      if(s.length >= 8){ score += 20; details.push('Ø·ÙˆÙ„ Ù…Ù†Ø§Ø³Ø¨ (>=8)'); }
      else { suggestions.push('Ø§Ø¬Ø¹Ù„Ù‡Ø§ Ø£Ø·ÙˆÙ„ Ù…Ù† 8 Ø£Ø­Ø±Ù'); details.push('Ù‚ØµÙŠØ±Ø© (<8)'); }

      if(s.length >= 12){ score += 10; details.push('Ø·ÙˆÙ„ Ù…Ù…ØªØ§Ø² (>=12)'); }

      // Ø£Ø­Ø±Ù ÙƒØ¨ÙŠØ±Ø©/ØµØºÙŠØ±Ø©
      if(/[A-Z]/.test(s)){ score += 15; details.push('ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø­Ø±Ù ÙƒØ¨ÙŠØ±'); } else suggestions.push('Ø£Ø¶Ù Ø­Ø±ÙÙ‹Ø§ ÙƒØ¨ÙŠØ±Ù‹Ø§ (A-Z)');
      if(/[a-z]/.test(s)){ score += 15; details.push('ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø­Ø±Ù ØµØºÙŠØ±'); } else suggestions.push('Ø£Ø¶Ù Ø­Ø±ÙÙ‹Ø§ ØµØºÙŠØ±Ù‹Ø§ (a-z)');

      // Ø£Ø±Ù‚Ø§Ù… ÙˆØ±Ù…ÙˆØ²
      if(/[0-9]/.test(s)){ score += 15; details.push('ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±Ù‚Ù…'); } else suggestions.push('Ø£Ø¶Ù Ø±Ù‚Ù…Ù‹Ø§ ÙˆØ§Ø­Ø¯Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');
      if(/[^A-Za-z0-9]/.test(s)){ score += 15; details.push('ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø±Ù…Ø² Ø®Ø§Øµ'); } else suggestions.push('Ø£Ø¶Ù Ø±Ù…Ø²Ù‹Ø§ Ø®Ø§ØµÙ‹Ø§ Ù…Ø«Ù„ !@#$%');

      // ØªØ¬Ù†Ù‘Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±/Ø§Ù„ØªØ³Ù„Ø³Ù„
      if(/(.)\1{2,}/.test(s)){ score -= 10; suggestions.push('ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ÙƒØ±Ø±Ø© Ø¨Ø´ÙƒÙ„ Ù…ØªÙƒØ±Ø±'); details.push('ÙŠÙˆØ¬Ø¯ ØªÙƒØ±Ø§Ø± Ù…ØªÙƒØ±Ø±'); }
      if(/123|321|abcd|qwe|password|000|111/.test(s.toLowerCase())){ score -= 10; suggestions.push('ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ³Ù„Ø³Ù„Ø§Øª ÙˆØ§Ù„Ø´Ø¹Ø¨ÙŠØ© Ù…Ø«Ù„ "123" Ø£Ùˆ "password"'); details.push('ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªØ³Ù„Ø³Ù„ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø´Ø§Ø¦Ø¹Ø©'); }

      // ØªØ·Ø¨ÙŠØ¹
      if(score < 0) score = 0;
      if(score > 100) score = 100;

      return { score, suggestions, details };
    }

    // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø­ÙŠÙ‘Ø©
    function updateLive(){
      const val = pw.value;
      if(!val){
        fill.style.width = '0%';
        fill.style.background = 'var(--bad)';
        strengthText.textContent = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„';
        tipsEl.innerHTML = '<li style="color:var(--muted)">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù„Ù„Ø¨Ø¯Ø¡</li>';
        return;
      }
      const res = analyzePassword(val);
      fill.style.width = res.score + '%';
      if(res.score < 40) fill.style.background = getComputedStyle(document.documentElement).getPropertyValue('--bad').trim() || '#ff6b6b';
      else if(res.score < 70) fill.style.background = getComputedStyle(document.documentElement).getPropertyValue('--warn').trim() || '#ffd86b';
      else fill.style.background = getComputedStyle(document.documentElement).getPropertyValue('--good').trim() || '#8ef08a';

      strengthText.textContent = res.score < 40 ? 'Ø¶Ø¹ÙŠÙØ©' : res.score < 70 ? 'Ù…ØªÙˆØ³Ø·Ø©' : 'Ù‚ÙˆÙŠØ©';
      // Ø¹Ø±Ø¶ Ø§Ù‚ØªØ±Ø§Ø­ÙŠÙ† Ø£Ùˆ Ø«Ù„Ø§Ø«Ø©
      tipsEl.innerHTML = (res.suggestions.length ? res.suggestions : ['ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ© â€” Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§!']).map(t => `<li>â€¢ ${t}</li>`).join('');
    }

    // Ø£Ø­Ø¯Ø§Ø«
    pw.addEventListener('input', updateLive);

    toggle.addEventListener('click', ()=>{
      if(pw.type === 'password'){ pw.type = 'text'; toggle.textContent = 'ğŸ™ˆ Ø¥Ø®ÙØ§Ø¡'; }
      else { pw.type = 'password'; toggle.textContent = 'ğŸ‘ï¸ Ø¥Ø¸Ù‡Ø§Ø±'; }
      pw.focus();
    });

    gen.addEventListener('click', ()=>{
      pw.value = generatePassword(14);
      updateLive();
      pw.select();
    });

    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(pw.value || '');
        alert('ØªÙ… Ù†Ø³Ø® ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± âœ…');
      }catch(e){
        // fallback
        const tmp = document.createElement('textarea');
        tmp.value = pw.value || '';
        document.body.appendChild(tmp);
        tmp.select();
        document.execCommand('copy');
        document.body.removeChild(tmp);
        alert('ØªÙ… Ù†Ø³Ø® ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± âœ…');
      }
    });

    reportBtn.addEventListener('click', ()=>{
      const value = pw.value;
      if(!value){ alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø£ÙˆÙ„Ø§Ù‹'); pw.focus(); return; }
      const result = analyzePassword(value);

      // ØªØ¬Ù‡ÙŠØ² HTML Ù„Ù„ØªÙ‚Ø±ÙŠØ±
      const strengthLabel = result.score < 40 ? `<span style="color:var(--bad);font-weight:800">Ø¶Ø¹ÙŠÙØ© (${result.score}%)</span>` :
                             result.score < 70 ? `<span style="color:var(--warn);font-weight:800">Ù…ØªÙˆØ³Ø·Ø© (${result.score}%)</span>` :
                             `<span style="color:var(--good);font-weight:800">Ù‚ÙˆÙŠØ© (${result.score}%)</span>`;

      const detailsHtml = result.details.length ? result.details.map(d => `<li>â€¢ ${d}</li>`).join('') : '<li>Ù„Ø§ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© â€” ÙƒÙ„Ù…Ø© Ø³Ù„ÙŠÙ…Ø©</li>';
      const suggHtml = result.suggestions.length ? result.suggestions.map(s => `<li>â€¢ ${s}</li>`).join('') : '<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª â€” Ù…Ù…ØªØ§Ø²</li>';

      analysisEl.innerHTML = `
        <div style="text-align:right">
          <p><strong>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</strong> ${strengthLabel}</p>
          <p><strong>Ø§Ù„Ø·ÙˆÙ„:</strong> ${value.length} Ø­Ø±Ù</p>
          <p><strong>ØªÙØ§ØµÙŠÙ„:</strong></p>
          <ul style="margin-top:6px;color:var(--muted);padding-inline-start:18px">${detailsHtml}</ul>
          <p style="margin-top:8px"><strong>Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†:</strong></p>
          <ul style="margin-top:6px;color:var(--muted);padding-inline-start:18px">${suggHtml}</ul>
          <p style="margin-top:10px;color:var(--muted);font-size:.95rem">Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ ØªØ®Ø²Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙÙŠ Ù…Ù„ÙØ§Øª Ù†ØµÙŠØ© Ø¹Ø§Ù…Ø© Ø£Ùˆ ØªØ±Ø³Ù„Ù‡Ø§ Ø¹Ø¨Ø± Ù‚Ù†ÙˆØ§Øª ØºÙŠØ± Ø¢Ù…Ù†Ø©.</p>
        </div>
      `;

      overlay.style.display = 'flex';
      overlay.setAttribute('aria-hidden','false');
    });

    closeBtn.addEventListener('click', ()=>{
      overlay.style.display = 'none';
      overlay.setAttribute('aria-hidden','true');
    });

    printBtn.addEventListener('click', ()=>{
      // Ø·Ø¨Ø§Ø¹Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙ‚Ø·
      const win = window.open('', '_blank', 'width=700,height=800');
      const title = `<h2 style="color:#000;text-align:right">ØªÙ‚Ø±ÙŠØ± ÙØ­Øµ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h2>`;
      const style = `<style>body{font-family:Arial,Helvetica,sans-serif;color:#111;direction:rtl;text-align:right;}ul{line-height:1.6}</style>`;
      win.document.write(`<html><head>${style}</head><body>${title}${analysisEl.innerHTML}</body></html>`);
      win.document.close();
      win.focus();
      win.print();
      setTimeout(()=>win.close(),500);
    });

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    updateLive();

    // Ø§Ø®ØªØµØ§Ø±: Enter Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    pw.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){ e.preventDefault(); reportBtn.click(); }
    });
  </script>
</body>
</html>
